#!/usr/bin/env bash

# Change to current dir (POSIXly).
cd -P -- "$(dirname -- "$0")"

# Look for existing vader installation.
vader=( ${HOME}/.vim/*bundle*/vader*/plugin/vader.vim )
if [ -f ${vader[0]} ]; then
    # Remove "plugin/vader.vim" suffix.
    vader=${vader[0]%/*/*}
fi

if [ -d $vader ]; then
    [[ ! -L vader.vim ]] && ln -s $vader
else
    git clone https://github.com/junegunn/vader.vim.git
fi

echo '(Be patient.. testing can take a while.)'
HOME=/dev/null vim -XNu vimrc -i NONE -c 'Vader! *' >/dev/null
